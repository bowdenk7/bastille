// Generated by CoffeeScript 1.10.0
(function() {
  var calls, stubbings,
    slice = [].slice;

  calls = require('./store/calls');

  stubbings = require('./store/stubbings');

  module.exports = function() {
    return {
      thenReturn: function() {
        var last, stubbedValues;
        stubbedValues = 1 <= arguments.length ? slice.call(arguments, 0) : [];
        if (last = calls.pop()) {
          stubbings.add(last.testDouble, last.args, stubbedValues);
          return last.testDouble;
        } else {
          throw new Error("No test double invocation call detected for `when()`.\n\n  Usage:\n    when(myTestDouble('foo')).thenReturn('bar')");
        }
      }
    };
  };

}).call(this);
